---
title: 地址块划分问题
date: 2023-02-15 15:15:04
tags: 计算机网络
categories: 计算机网络
---



今天复习的时候看到这样一个问题：

![](/images/地址块划分问题/1.jpg)

其实本质上考察的就是网段划分，首先先介绍一下CIDR划分方案：

-  引入一个额外的子网掩码(subnet mask)来区分网络号和主机号;

- 子网掩码也是一个32位的正整数. 通常用一串 "0" 来结尾;

- 将IP地址和子网掩码进行 "按位与" 操作, 得到的结果就是网络号;

- 网络号和主机号的划分与这个IP地址是A类、B类还是C类无关;

举一个例子：

假设有一个IP地址为`124.223.78.3`，子网掩码为`225.225.225.0`，那么将IP地址的32位二进制数和子网掩码32位二进制数按位与得到网络号：124.223.78.0，所以此时的子网范围就为`124.223.78.0~124.223.78.255`一共256个IP地址。

重点就在于这个256个IP地址是怎么来的，由于子网掩码最后0有8位，故该网段内一共可以容纳2^8 = 256个地址，所以我们可以得出一个结论，掩码后面有`x`个连续0，网段就能容纳`2^x`个IP地址。

**特殊的IP地址**

- 将IP地址中的主机地址全部设为0, 就成为了网络号, 代表这个局域网
- 将IP地址中的主机地址全部设为1, 就成为了广播地址, 用于给同一个链路中相互连接的所有主机发送数据包;
- 127.*的IP地址用于本机环回(loop back)测试,通常是127.0.0.1

回到问题中：当我们需要在一个地址块中能塞下150个地址和一个路由器地址，由于`2 ^ 7 - 2 < 150 + 1 < 2 ^ 8 - 2`所以需要子网掩码后8位为0`(减2是因为要留有网络号和广播地址)`，题目中告诉我们网络前缀位为23，也就是掩码有23个1，所以我们此时将掩码24位到32位设0即可，此时这个地址块给LAN3分配：

LAN3：30.138.118.0/24

同理：从要分配数多的地址块到少的地址块分析，LAN2主机数91，由于`2 ^ 6 - 2 < 91 + 1 < 2 ^ 7 - 2`，所以网络前缀号为32 - 7 = 25，之前24位为0时的网段分配给了LAN3，所以将24为置1，25位置0分配给LAN2

LAN2：30.138.119.0/25

之后LAN5和LAN1 LAN4一样这样分析即可。
